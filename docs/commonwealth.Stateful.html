<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Stateful</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Class: Stateful</h1>
    
    



<section>
    
<header>
    <h2>
        <span class="ancestors"><a href="commonwealth.html">commonwealth</a>.</span>
    
    Stateful
    </h2>
    
</header>  

<article>
    <div class="container-overview">
    
    
    
        
<dt>
    <h4 class="name" id="Stateful"><span class="type-signature"></span>new Stateful<span class="signature">(<span class="optional">name</span>)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Stateful is the main class in commonwealth. It represents an
object that is both a stateful (having states) and a state.
It is a composite state object.
For example, this may represent the backend for a login button
that contains two states, loggedIn and loggedOut which are also
both instances of Stateful.
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>{<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</li></ul>
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		<th>Argument</th>
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>name</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>
            
            
                <td class="attributes">
                
                    &lt;optional><br>
                
                    
                
                </td>
            
            
            
            
            <td class="description last">The name (id) of this state.</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 35
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    
    
</dd>

    
    </div>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
        <h3 class="subsection-title">Methods</h3>
        
        <dl>
            
<dt>
    <h4 class="name" id="addCurrentState"><span class="type-signature"></span>addCurrentState<span class="signature">(state)</span><span class="type-signature"> &rarr; {<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Adds a substate and sets it as the current state in one fell swoop!
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>{<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</li></ul>
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>state</code></td>
            
            
            <td class="type">
            
                
<span class="param-type"><a href="commonwealth.Stateful.html">commonwealth.Stateful</a></span>
|

<span class="param-type">string</span>


            
            </td>
            
            
            
            
            
            <td class="description last">See addSubstate();</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 222
    </li></ul></dd>
    
    
    
    
    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="commonwealth.Stateful.html#addSubstate">commonwealth.Stateful#addSubstate</a></li>
        
            <li>commonwealth.Stateful#setCurrentState</li>
        </ul>
    </dd>
    
    
    
</dl>

    
    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    The current state.
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type"><a href="commonwealth.Stateful.html">commonwealth.Stateful</a></span>


	</dd>
</dl>

        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="addStateMethod"><span class="type-signature"></span>addStateMethod<span class="signature">(methodName_or_defaultFunction, <span class="optional">defaultFunction</span>)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Registers a method to be handled by the stateful object's current
state. When the method is called, the currentState() is checked to see
if it has an implementation of the method. This check cascades up the chain
to all subclass ancestors until the first one with the method defined is found.
If the method is never found in a subclass, the default method is called instead.
If the function has a function defined on it named `before` or `after`, that function
is called before or after the main function is called (regardless of what subclass
is ultimately used).
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		<th>Argument</th>
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>methodName_or_defaultFunction</code></td>
            
            
            <td class="type">
            
            </td>
            
            
                <td class="attributes">
                
                    
                
                </td>
            
            
            
            
            <td class="description last">The name of the function to register, or a defaultFunction with a name.</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>defaultFunction</code></td>
            
            
            <td class="type">
            
            </td>
            
            
                <td class="attributes">
                
                    &lt;optional><br>
                
                    
                
                </td>
            
            
            
            
            <td class="description last">A function to be called as the default if there is nothing defined in the substate.</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 260
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="addSubstate"><span class="type-signature"></span>addSubstate<span class="signature">(state_or_name)</span><span class="type-signature"> &rarr; {<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Registers a state as a substate of the Stateful object.
If one doesn't exist, it automatically creates it and assigns it
the name parameter.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>state_or_name</code></td>
            
            
            <td class="type">
            
                
<span class="param-type"><a href="commonwealth.Stateful.html">commonwealth.Stateful</a></span>
|

<span class="param-type">string</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The state to register or the name of a state to create.</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 185
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    <h5>Throws:</h5>
    <ul>
            <li>
<div class="param-desc">
    Argument Error if there is no state_or_name argument.
</div>


</li>
        
            <li>
<div class="param-desc">
    Invalid State ID Error if the name of the state provided is bogus.
</div>


</li>
        </ul>
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    A reference to the state object
        that was passed in or created.
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type"><a href="commonwealth.Stateful.html">commonwealth.Stateful</a></span>


	</dd>
</dl>

        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="addTransition"><span class="type-signature"></span>addTransition<span class="signature">(transition, map)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Registers a one or more state changes that occur when a message is
dispatched using dispatch(). Also, this automatically registers a
method that dispatches the event for you (using addStateMethod()).
Once a transition is registered, you can use either dispatch() or
the generated method to transition.
e.g. dispatch("foo"); or foo();

The map of state changes is an object with names of states paired
with the state they should change to when the transition event is
dispatched. "*" can be used to match any state.
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>{<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</li></ul>
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>transition</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The name of the transition to register.</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>map</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>
            
            
            
            
            
            <td class="description last">An object with mappings of states to transition
                    to and from.</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 386
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    The method created for transitioning.
</div>



        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="currentState"><span class="type-signature"></span>currentState<span class="signature">(<span class="optional">state</span>)</span><span class="type-signature"> &rarr; {<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Combination getter/setter for currentState using the JQuery style.
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>{<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</li></ul>
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		<th>Argument</th>
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>state</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type"><a href="commonwealth.Stateful.html">commonwealth.Stateful</a></span>


            
            </td>
            
            
                <td class="attributes">
                
                    &lt;optional><br>
                
                    
                
                </td>
            
            
            
            
            <td class="description last">If supplied, the
       currentState is set to this value. If the value is a stateful
       object, that object is used. If the value is a string, the
       string is interpreted as a state name.</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 137
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    The current state or null.
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type"><a href="commonwealth.Stateful.html">commonwealth.Stateful</a></span>


	</dd>
</dl>

        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="dispatch"><span class="type-signature"></span>dispatch<span class="signature">(message)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Dispatches a message to all of the children in the state chain.
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>{<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</li></ul>
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>message</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>
            
            
            
            
            
            <td class="description last">A message that is broadcast.</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 339
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="finalCurrentState"><span class="type-signature"></span>finalCurrentState<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Gets the most distant ancestor of this state which is not null
or returns `this`.
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>{<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</li></ul>
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 153
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    <h5>Returns:</h5>
    
            


<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type"><a href="commonwealth.Stateful.html">commonwealth.Stateful</a></span>


	</dd>
</dl>

        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="getStateByName"><span class="type-signature"></span>getStateByName<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Gets a substate of a stateful object based on the name property of that state.
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>{<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</li></ul>
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 169
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    <h5>Returns:</h5>
    
            


<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type"><a href="commonwealth.Stateful.html">commonwealth.Stateful</a></span>


	</dd>
</dl>

        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="on"><span class="type-signature"></span>on<span class="signature">(message, handler)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Registers a function that is called when a message is dispatched
using dispatch().
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>{<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</li></ul>
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>message</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The message to respond to.</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>handler</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The function to call when the message is 
                          dispatched.</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 363
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="parentState"><span class="type-signature"></span>parentState<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Returns the state one higher in the chain. If state A uses
setCurrentState() on state B, B.parentState() points to A.
If there is no parent state, returns null.
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>{<a href="commonwealth.Stateful.html">commonwealth.Stateful</a>}</li></ul>
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 236
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    The parent state of this or null.
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type"><a href="commonwealth.Stateful.html">commonwealth.Stateful</a></span>


	</dd>
</dl>

        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="stateChainToArray"><span class="type-signature"></span>stateChainToArray<span class="signature">()</span><span class="type-signature"> &rarr; {array}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Returns an array of Stateful objects for the given object starting
with the object's root state and extending to the finalCurrentState.
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 422
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    <h5>Returns:</h5>
    
            


<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">array</span>


	</dd>
</dl>

        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="toString"><span class="type-signature"></span>toString<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Standard implementation of toString() that returns the object type.
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="commonwealth.js.html">commonwealth.js</a>, line 412
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    
    
    
    
    
    <h5>Returns:</h5>
    
            


<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">string</span>


	</dd>
</dl>

        
    
    
</dd>

        </dl>
    
    
    
    
    
</article>

</section>  




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="commonwealth.History.html">History</a></li><li><a href="commonwealth.Stateful.html">Stateful</a></li></ul><h3>Namespaces</h3><ul><li><a href="commonwealth.html">commonwealth</a></li><li><a href="commonwealth.utils.html">utils</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Fri Apr 05 2013 16:27:04 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
